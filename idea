Вариант 1:
Будем брать запрос пользователя и формализовывать(это лучше чем придумаывать) его , то есть прогоняем через ллм, 
благодаря жесткому промпту будем выделять ключевые признаки, место и флаг того , что требуется от 
признаков(макс, мин или сред).Потом оформляем это в json , потом сужаем поиск к каким-то топ k (например, 
в начале по месту , потом признаки по флагу), потом все найденное оформляем в промпт и кидаем ллм

Замечания:
1) по хорошему бд лучше разделить на отдельные бд для каждого признака
2) проработать возможные сценарии (например, если чел написал полную фигню, если чел не попросил чего то конкретно,
так далее)
3) список флагов надо ограничить, и каждую ситуацию для флага надо захардкодить 
4) выделить ключевые признаки из пула запросов составленный душкину


Вариант 2:
Будем брать запрос пользователя и формализовывать(это лучше чем придумаывать) его , то есть прогоняем через ллм, 
благодаря жесткому промпту будем выделять ключевые признаки, место и флаг того , что требуется от 
признаков(макс, мин или сред или любое другое действие). Потом просим ллм написать sql запрос в бд с данными 